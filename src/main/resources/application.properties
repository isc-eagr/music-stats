# SQLite DB Properties
# busy_timeout: wait up to 10s for locks to clear (prevents immediate "database locked" errors)
# journal_mode=WAL: enables concurrent reads during writes for better performance
spring.datasource.url=jdbc:sqlite:C:/Music Stats DB/music-stats.db?busy_timeout=10000&journal_mode=WAL
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect

# HikariCP connection pool - allow more connections for read concurrency with WAL mode
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000

# JPA/Hibernate properties
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# Use exact table/column names as specified in annotations (don't convert to snake_case)
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# Disable Spring SQL initialization (avoid running schema.sql/data.sql)
spring.sql.init.mode=never

# JDBC template tuning
spring.jdbc.template.fetch-size=1000
spring.jdbc.template.max-rows=-1

# SQLite specific - disable batch updates for better compatibility
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false

# Thymeleaf dev settings
spring.thymeleaf.cache=false
spring.thymeleaf.mode=HTML

# Enable AntPathMatcher for trailing-slash behavior
spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER

# File upload (multipart) limits - increase so large CSV imports don't fail
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB