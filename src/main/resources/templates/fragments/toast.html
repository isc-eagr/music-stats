<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:fragment="toast-styles">
        <style>
            /* Toast Notification Container */
            .toast-container {
                position: fixed;
                top: 80px;
                right: 20px;
                z-index: 2147483647;
                display: flex;
                flex-direction: column;
                gap: 10px;
                pointer-events: none;
            }
            
            /* Individual Toast */
            .toast {
                display: flex;
                align-items: flex-start;
                gap: 12px;
                padding: 14px 16px;
                min-width: 300px;
                max-width: 420px;
                border-radius: 10px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
                pointer-events: auto;
                animation: toastSlideIn 0.3s ease-out;
                backdrop-filter: blur(8px);
            }
            
            .toast.toast-hiding {
                animation: toastSlideOut 0.3s ease-in forwards;
            }
            
            /* Toast Types */
            .toast-error {
                background: linear-gradient(135deg, rgba(220, 38, 38, 0.95), rgba(185, 28, 28, 0.95));
                border: 1px solid rgba(248, 113, 113, 0.3);
            }
            
            .toast-warning {
                background: linear-gradient(135deg, rgba(217, 119, 6, 0.95), rgba(180, 83, 9, 0.95));
                border: 1px solid rgba(251, 191, 36, 0.3);
            }
            
            .toast-success {
                background: linear-gradient(135deg, rgba(22, 163, 74, 0.95), rgba(21, 128, 61, 0.95));
                border: 1px solid rgba(74, 222, 128, 0.3);
            }
            
            .toast-info {
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));
                border: 1px solid rgba(147, 197, 253, 0.3);
            }
            
            /* Toast Icon */
            .toast-icon {
                flex-shrink: 0;
                font-size: 1.3rem;
                line-height: 1;
                margin-top: 2px;
            }
            
            /* Toast Content */
            .toast-content {
                flex: 1;
                color: #fff;
            }
            
            .toast-title {
                font-weight: 600;
                font-size: 0.95rem;
                margin-bottom: 2px;
            }
            
            .toast-message {
                font-size: 0.875rem;
                opacity: 0.92;
                line-height: 1.4;
                word-break: break-word;
            }
            
            /* Toast Close Button */
            .toast-close {
                flex-shrink: 0;
                background: rgba(255, 255, 255, 0.15);
                border: none;
                color: #fff;
                width: 24px;
                height: 24px;
                border-radius: 6px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1rem;
                transition: background 0.15s ease;
                margin-top: -2px;
            }
            
            .toast-close:hover {
                background: rgba(255, 255, 255, 0.25);
            }
            
            /* Animations */
            @keyframes toastSlideIn {
                from {
                    opacity: 0;
                    transform: translateX(100%);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            
            @keyframes toastSlideOut {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(100%);
                }
            }
            
            /* Responsive */
            @media (max-width: 480px) {
                .toast-container {
                    left: 10px;
                    right: 10px;
                    top: 70px;
                }
                
                .toast {
                    min-width: auto;
                    max-width: none;
                }
            }
        </style>
    </th:block>
</head>
<body>
    <!-- Toast Container (include once per page) -->
    <div th:fragment="toast-container" id="toastContainer" class="toast-container"></div>
    
    <!-- Toast JavaScript -->
    <th:block th:fragment="toast-scripts">
        <script>
            (function() {
                // Create container if it doesn't exist
                function ensureContainer() {
                    let container = document.getElementById('toastContainer');
                    if (!container) {
                        container = document.createElement('div');
                        container.id = 'toastContainer';
                        container.className = 'toast-container';
                        document.body.appendChild(container);
                    }
                    return container;
                }
                
                /**
                 * Show a toast notification
                 * @param {string} message - The message to display
                 * @param {string} type - 'error', 'warning', 'success', or 'info' (default: 'info')
                 * @param {number} duration - Duration in ms before auto-hide (default: 5000, 0 for no auto-hide)
                 */
                window.showToast = function(message, type = 'info', duration = 5000) {
                    const container = ensureContainer();
                    
                    const icons = {
                        error: '❌',
                        warning: '⚠️',
                        success: '✅',
                        info: 'ℹ️'
                    };
                    
                    const titles = {
                        error: 'Error',
                        warning: 'Warning',
                        success: 'Success',
                        info: 'Info'
                    };
                    
                    const toast = document.createElement('div');
                    toast.className = `toast toast-${type}`;
                    toast.innerHTML = `
                        <span class="toast-icon">${icons[type] || icons.info}</span>
                        <div class="toast-content">
                            <div class="toast-title">${titles[type] || titles.info}</div>
                            <div class="toast-message">${message}</div>
                        </div>
                        <button class="toast-close" onclick="this.parentElement.remove()">×</button>
                    `;
                    
                    container.appendChild(toast);
                    
                    // Auto-remove after duration
                    if (duration > 0) {
                        setTimeout(() => {
                            if (toast.parentElement) {
                                toast.classList.add('toast-hiding');
                                setTimeout(() => toast.remove(), 300);
                            }
                        }, duration);
                    }
                    
                    return toast;
                };
                
                // Convenience methods
                window.showErrorToast = function(message, duration) {
                    return showToast(message, 'error', duration || 6000);
                };
                
                window.showWarningToast = function(message, duration) {
                    return showToast(message, 'warning', duration || 5000);
                };
                
                window.showSuccessToast = function(message, duration) {
                    return showToast(message, 'success', duration || 4000);
                };
                
                window.showInfoToast = function(message, duration) {
                    return showToast(message, 'info', duration || 5000);
                };
            })();
        </script>
    </th:block>
</body>
</html>
